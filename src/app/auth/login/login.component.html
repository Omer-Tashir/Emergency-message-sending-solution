<div class="login-page">
  <div class="login-container" [@fadeInOnEnter]>
    <div class="login-title-container">
      <img [src]="logo" class="logo" [routerLink]="'/incidents'" />
    </div>

    <form [formGroup]="formGroup" class="login-form" autocomplete="off" [class.login-form--new-user]="newUser">
      <mat-form-field>
        <span class="prefix" matPrefix>
          <mat-icon>account_circle</mat-icon>
        </span>
        <mat-label class="username">מספר עובד</mat-label>
        <input
          matInput
          formControlName="username"
          autocomplete="off"
          spellcheck="false" 
        />
        <mat-error *ngIf="hasError('username', 'required')">חובה להזין מספר עובד</mat-error>
      </mat-form-field>

      <mat-form-field>
        <span class="prefix" matPrefix>
          <mat-icon>password</mat-icon>
        </span>
        <mat-label class="password">סיסמא</mat-label>
        <input
          matInput
          type="password"
          formControlName="password"
          autocomplete="off"
          spellcheck="false" 
        />
        <mat-error *ngIf="hasError('password', 'required')">חובה להזין סיסמא</mat-error>
        <mat-error *ngIf="hasError('password', 'minlength')">חובה להזין סיסמא בעלת 6 תווים לפחות</mat-error>
      </mat-form-field>

      <mat-form-field *ngIf="newUser">
        <span class="prefix" matPrefix>
          <mat-icon>person</mat-icon>
        </span>
        <mat-label class="name">שם מלא</mat-label>
        <input
          matInput
          formControlName="name"
          autocomplete="off"
          spellcheck="false" 
        />
        <mat-error *ngIf="hasError('name', 'required')">חובה להזין שם מלא</mat-error>
      </mat-form-field>

      <mat-form-field *ngIf="newUser">
        <span class="prefix" matPrefix>
          <mat-icon>email</mat-icon>
        </span>
        <mat-label>אימייל</mat-label>
        <input matInput formControlName="email" type="email" />

        <mat-error *ngIf="hasError('email', 'required')">
            חובה להזין אימייל
        </mat-error>

        <mat-error *ngIf="hasError('email', 'email')">
            האימייל לא תקין, יש להזין אימייל תקין
        </mat-error>
    </mat-form-field>
    </form>

    <div class="form-footer">
      <button
        mat-raised-button
        (click)="submit()"
        color="primary"
        [disabled]="!formGroup.valid"
      >
      <ng-container *ngIf="!newUser">התחבר</ng-container>
      <ng-container *ngIf="newUser">הרשם</ng-container>
      </button>

    </div>

    <div class="sign-up">
      <span (click)="toggleNewUser()">
          <ng-container *ngIf="!newUser">משתמש חדש? לחץ כאן</ng-container>
          <ng-container *ngIf="newUser">כבר רשום למערכת? לחץ כאן</ng-container>
      </span>
  </div>
  </div>
</div>
